services:
  webtop:
    build:
      context: .
      dockerfile: Dockerfile.custom
    security_opt:
      - seccomp:unconfined
    environment:
      PUID: 1000
      PGID: 1000
      TZ: America/New_York
      TITLE: Webtop
      CUSTOM_USER: ${SERVICE_USER_WEBTOP}
      SUDO_PASSWORD: ${SERVICE_PASSWORD_WEBTOP}
      PASSWORD: ${SERVICE_PASSWORD_WEBTOP}
      SERVICE_FQDN_WEBTOP_3000          # <-- generates FQDN + route
      DOCKER_MODS: linuxserver/mods:universal-package-install|linuxserver/mods:code-server-zsh
      INSTALL_PACKAGES: unzip|chromium|nano|neovim|git|htop|curl|wget|ripgrep|fonts-lyx|xclip|xsel|gcc|clang|build-essential|...
    volumes:
      - ./webtop-config:/config:rw
    devices:
      - /dev/dri:/dev/dri
    shm_size: 4gb
    restart: unless-stopped
    privileged: true
    ports:
      - "3000"        # lets Coolify discover the port
